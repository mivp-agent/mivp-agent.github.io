
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="http://mivp-agent.github.io/moos_ivp/episode_manager/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.0">
    
    
      
        <title>pEpisodeManager - mivp-agent</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8b42a75e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    
      

  


  

  


  <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-FD1VZZ2BGB"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-FD1VZZ2BGB",{page_path:t.pathname})})})</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FD1VZZ2BGB"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pepisodemanager" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="mivp-agent" class="md-header__button md-logo" aria-label="mivp-agent" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mivp-agent
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pEpisodeManager
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/CarterFendley/moos-ivp-agent/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    CarterFendley/moos-ivp-agent
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../getting_started/" class="md-tabs__link">
      Getting Started
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../python/" class="md-tabs__link">
        Python API
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        MOOS-IvP Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="mivp-agent" class="md-nav__button md-logo" aria-label="mivp-agent" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    mivp-agent
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/CarterFendley/moos-ivp-agent/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    CarterFendley/moos-ivp-agent
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Python API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python API" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Python API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/mission_manager/" class="md-nav__link">
        MissionManager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/mission_message/" class="md-nav__link">
        MissionMessage
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" data-md-state="indeterminate" type="checkbox" id="__nav_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Aquaticus
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Aquaticus" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Aquaticus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/aquaticus/field_discretizer.md" class="md-nav__link">
        FieldDiscretizer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          MOOS-IvP Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MOOS-IvP Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          MOOS-IvP Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bhv_agent/" class="md-nav__link">
        BHV_Agent
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          pEpisodeManager
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        pEpisodeManager
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose-of-pepisodemanager" class="md-nav__link">
    Purpose of pEpisodeManager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reset-position" class="md-nav__link">
    Reset position
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#success-failure-conditions" class="md-nav__link">
    Success &amp; failure conditions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-transition-posts" class="md-nav__link">
    State Transition Posts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#todo-max-duration" class="md-nav__link">
    TODO: Max duration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-transitions" class="md-nav__link">
    State &amp; Transitions
  </a>
  
    <nav class="md-nav" aria-label="State &amp; Transitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-running" class="md-nav__link">
    - RUNNING
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-stopping_helm" class="md-nav__link">
    - STOPPING_HELM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-reseting-working-on-the-spelling" class="md-nav__link">
    - RESETING (working on the spelling)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-paused" class="md-nav__link">
    - PAUSED
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-episode_mgr_ctrl" class="md-nav__link">
    Using EPISODE_MGR_CTRL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#episode-reports" class="md-nav__link">
    Episode Reports
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    How it works
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flag_mgr_agent.md" class="md-nav__link">
        uFldFlagManagerAgent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tag_mgr_agent.md" class="md-nav__link">
        uFldTagManagerAgent
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" data-md-state="indeterminate" type="checkbox" id="__nav_4_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_6">
          Missions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Missions" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Missions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../missions/agent_aquaticus.md" class="md-nav__link">
        AgentAquaticus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose-of-pepisodemanager" class="md-nav__link">
    Purpose of pEpisodeManager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reset-position" class="md-nav__link">
    Reset position
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#success-failure-conditions" class="md-nav__link">
    Success &amp; failure conditions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-transition-posts" class="md-nav__link">
    State Transition Posts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#todo-max-duration" class="md-nav__link">
    TODO: Max duration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-transitions" class="md-nav__link">
    State &amp; Transitions
  </a>
  
    <nav class="md-nav" aria-label="State &amp; Transitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-running" class="md-nav__link">
    - RUNNING
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-stopping_helm" class="md-nav__link">
    - STOPPING_HELM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-reseting-working-on-the-spelling" class="md-nav__link">
    - RESETING (working on the spelling)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-paused" class="md-nav__link">
    - PAUSED
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-episode_mgr_ctrl" class="md-nav__link">
    Using EPISODE_MGR_CTRL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#episode-reports" class="md-nav__link">
    Episode Reports
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    How it works
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mivp-agent/mivp-agent.github.io/tree/master/docs/moos_ivp/episode_manager.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="pepisodemanager">pEpisodeManager</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This page will not explain <strong>anything</strong> about the basics of MOOS-IvP. If you are new and looking for resources on this checkout <a href="https://oceanai.mit.edu/moos-ivp/pmwiki/pmwiki.php">their homepage</a>. Consider completing the labs associated with <a href="https://oceanai.mit.edu/2.680/pmwiki/pmwiki.php">MIT 2.680</a> if you are really serious in your goal to learn MOOS-IvP.</p>
</div>
<h2 id="purpose-of-pepisodemanager">Purpose of pEpisodeManager</h2>
<p>In training of ML agents it is often desirable to split training experience into episodes that end in either success or failure. pEpisodeManager provides the capability to reset vehicles when some conditions are meet. This prevents the need to shutdown the vehicle between episodes (a expensive process).</p>
<p>The demo below shows pEpisodeManager running during training of an agent in the <a href="https://github.com/CarterFendley/moos-ivp-agent/tree/main/missions/AgentAquaticus">AgentAquaticus</a> mission. This mission is configured to reset agents to their home flag when they successfully capture the flag <strong>OR</strong> when they go out of bounds.</p>
<p><img alt="pEpisodeManager" src="../../assets/QTableDemo.gif" /></p>
<hr />
<h2 id="configuration">Configuration</h2>
<p>There are four <em>main</em> components to configuring a instance of pEpisodeManager.</p>
<ul>
<li>Reset position</li>
<li>Configuring success conditions</li>
<li>Configuring failure conditions</li>
</ul>
<h3 id="reset-position">Reset position</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, the only supported reset <code>depth</code> is 0. MOOS-IvP Agent is not currently compatible with submersible missions.</p>
</div>
<p>For the basic functionality of pEpisodeManager to work, you must tell the manager where to reset the vehicle when. The following config block shows the proper usage of the <code>reset_pos</code> config variable where <code>x=50</code>, <code>y=-24</code>, and <code>heading=240</code>.</p>
<pre><code>ProcessConfig = pEpisodeManager
{
  AppTick   = 4
  CommsTick = 4

  reset_pos = 50,-24,240
}
</code></pre>
<p>If the following pEpisodeManager was started it <strong>would not</strong> reset the vehicle as it does not know <em>when</em> to do so. See bellow for configuration of success and failure conditions.</p>
<h3 id="success-failure-conditions">Success &amp; failure conditions</h3>
<p>For the manager to know when it should reset the vehicle (or equivalently when episodes <em>should</em> end), we need to do one of two things.</p>
<ul>
<li>Specify configuration variables for success &amp; failure conditions.</li>
<li>Trigger reset directly via a post to the <code>EPISODE_MGR_CTRL</code> moos var.</li>
</ul>
<p>This section will follow the configuration method. See below for the usage of <code>EPISODE_MGR_CTRL.</code></p>
<div class="admonition note">
<p class="admonition-title">Reminder</p>
<p>For pEpisodeManager to have access to a MOOS var it must either originate from an app also running on that vehicle or be forwarded from another vehicle. Forwarding is usually done via <a href="https://oceanai.mit.edu/ivpman/pmwiki/pmwiki.php?n=IvPTools.UFldNodeBroker">uFldNodeBroker</a> or <a href="https://oceanai.mit.edu/ivpman/pmwiki/pmwiki.php?n=IvPTools.UFldShoreBroker">uFldShoreBroker</a>.</p>
</div>
<p>The following configuration block is made for <a href="https://oceanai.mit.edu/aquaticus/pmwiki/pmwiki.php?n=Main.HomePage">Project Aquaticus</a> and shows proper usage of the <code>end_success_condition</code> and <code>end_failure_condition</code>. The resulting behavior will be for the vehicle to reset when either tagged or in possession of the virtual flag.</p>
<pre><code>ProcessConfig = pEpisodeManager
{
  AppTick   = 4
  CommsTick = 4

  end_success_condition = (HAS_FLAG = true)
  end_failure_condition = (TAGGED = true)

  reset_pos = 50,-24,240
}
</code></pre>
<p>More complex conditions can be specified using <a href="https://github.com/moos-ivp/svn-mirror/blob/master/ivp/src/lib_logic/manpage.txt">this format</a>. If multiple <code>end_success_condition</code> or <code>end_failure_condition</code> lines are specified then pEpisodeManager will treat the relationship between them as an <strong>AND</strong> clause.</p>
<h3 id="state-transition-posts">State Transition Posts</h3>
<p>There are three <a href="./#state-transitions">state transitions</a> which can be configured to post specified MOOS vars. The following config block shows the correct usage of the configuration variables. </p>
<pre><code>ProcessConfig = pEpisodeManager
{
  AppTick   = 4
  CommsTick = 4

  end_success_condition = (HAS_FLAG = true)
  end_failure_condition = (TAGGED = true)

  reset_pos = 50,-24,240

  start_post = var=MY_VAR,val=now_starting

  reset_post = var=UNTAG_REQUEST,val=vname=$(VNAME)
  reset_post = var=MY_VAR,val=now_resetting

  pause_post = var=MY_VAR,val=now_pausing
}
</code></pre>
<p>TODO: Explain</p>
<h3 id="todo-max-duration">TODO: Max duration</h3>
<hr />
<h2 id="state-transitions">State &amp; Transitions</h2>
<h3 id="overview">Overview</h3>
<p>There are four states which pEpisodeManager can be in. These states will be posted to the <code>EPISODE_MGR_STATE</code> MOOS var </p>
<h4 id="-running">- <code>RUNNING</code></h4>
<p>This is the main state, where MOOS variables are consumed to check if either <code>end_success_condition</code>s or <code>end_failure_conditions</code>s are satisfied at which point a state transition to <code>STOPPING_HELM</code> is triggered. </p>
<p>Alternatively the vehicle can be reset through the <code>EPISODE_MGR_STATE</code> or by reaching the <code>max_duration</code> specified in the config. </p>
<h4 id="-stopping_helm">- <code>STOPPING_HELM</code></h4>
<p>This state is used to wait for the <code>IVPHELM_STATE</code> MOOS var to enter the <code>PARK</code> state indicating that the vehicle will not be attempting to navigate during which is useful for the next state <code>RESETING</code>.</p>
<h4 id="-reseting-working-on-the-spelling">- <code>RESETING</code> (working on the spelling)</h4>
<p>This state is used to wait for the vehicles <code>NAV_X</code> and <code>NAV_Y</code> to be in some tolerance of the configured <code>reset_pos</code>. After this condition is meet pEpisodeManager will check if a pause has been requested by use of <code>EPISODE_MGR_STATE</code> <a href="./#using-episode_mgr_ctrl">see here</a>. If a pause has been requested the next state will be <code>PAUSED</code> and otherwise it will continue to the <code>RUNNING</code> state.</p>
<h4 id="-paused">- <code>PAUSED</code></h4>
<p>Used to stop keep vehicles stopped until a <code>EPISODE_MGR_CTRL</code> post is made indicating that it should be started and transition to the <code>RUNNING</code> state.</p>
<h2 id="using-episode_mgr_ctrl">Using EPISODE_MGR_CTRL</h2>
<p>It can be useful to manually trigger state change in pEpisodeManager via a MOOS var post. For this reason pEpisodeManager listens on the <code>EPISODE_MGR_CTRL</code> variable. There are three  "actions" which can be triggered via this method.</p>
<ul>
<li><code>start</code>: Used when pEpisodeManager is in the <code>PAUSED</code> state to transition to <code>RUNNING</code>.</li>
<li><code>hardstop</code>: Immediately stop the current episode and enter the <code>PAUSED</code> state after resetting. Will report the episode as a failure in the episode report.</li>
<li><code>reset</code>: Immediately end the current episode. The state of success / failure can be set in the <code>EPISODE_MGR_CTRL</code> post.</li>
<li><code>pause</code>: After the current episode ends, enter the <code>PAUSED</code> state.</li>
</ul>
<p>These actions can be triggered by making a post where <code>type=</code> is followed by one of these action's names. For example, the following command uses the <a href="https://oceanai.mit.edu/ivpman/pmwiki/pmwiki.php?n=IvPTools.UPokeDB">uPokeDB</a> utility to make post causing the pEpisodeManager to come to a paused state after the current episode.</p>
<pre><code>uPokeDB alpha.moos EPISODE_MGR_CTRL=type=pause
</code></pre>
<p>The <code>reset</code> can take an additional argument which specifies what value should be reported for the success state.</p>
<pre><code>uPokeDB alpha.moos EPISODE_MGR_CTRL=type=pause,success=true
</code></pre>
<p>The <a href="../../python/mission_message/">MissionMessage</a> python wrapper provides a pythonic way of trigging these posts.</p>
<h2 id="episode-reports">Episode Reports</h2>
<p>To report of the success / failure of each episode pEpisodeManager will post to the <code>EPISODE_MGR_REPORT</code> a comma separated key/value pairs. This are also helpful for debugging. The bellow is an example of one such report.</p>
<pre><code>NUM=8,SUCCESS=true,DURATION=122.0297,WILL_PAUSE=false
</code></pre>
<p>These reports are automatically forwarded by <a href="../bhv_agent/">BHV_Agent</a> without any need for further configuration. In python <a href="../../python/mission_message/">MissionMessage</a> will parse these into easily accessible variables.</p>
<h2 id="how-it-works">How it works</h2>
<p>TODO
- Logic Conditions
- USIM reset</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../bhv_agent/" class="md-footer__link md-footer__link--prev" aria-label="Previous: BHV_Agent" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              BHV_Agent
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Carter Fendley
          </div>
        
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.f8263e09.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.4fc53ad4.min.js"></script>
      
    
  </body>
</html>